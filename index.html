<!doctype html>

<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Bash...for aspiring hackers</title>

        <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
        <meta name="author" content="Jeremy A. Clewell">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/theme/foo.css" id="theme">
        <link rel="stylesheet" type="text/css" href="css/stylesheet.css" media="screen">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', include the PDF print sheet -->
        <script>
            if( window.location.search.match( /print-pdf/gi ) ) {
                var link = document.createElement( 'link' );
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = 'css/print/pdf.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
            }
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                
                <section data-markdown>
                    <script type="text/template">
                    # Bash
                    ** Just enough to be dangerous **

                    I'm totally *NOT* qualified to conduct this brown bag.
                    </script>
                    <div id="downloads" class="clearfix">
                      <a href="https://github.com/jeremyclewell/introduction-to-bash/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
                      <a href="https://github.com/jeremyclewell/introduction-to-bash/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
                      <a href="https://github.com/jeremyclewell/introduction-to-bash" id="view-on-github" class="button"><span>View on GitHub</span></a>
                    </div>
                </section>
                
                <section>
                    <section data-markdown>
                        <script type="text/template">
                        ## [Unix](http://upload.wikimedia.org/wikipedia/commons/7/77/Unix_history-simple.svg)
                        


                        * It all started at Bell Labs back in &rsquo;70.

                        * Developed by it&rsquo;s users for it&rsquo;s usersâ€¦who were computer scientists.

                        * Intended to be used as an aid in research and problem solving.
                        </script>
                        <aside class="notes">
                            
                        </aside>
                    </section>

                    
                    <section data-markdown>
                        <script type="text/template">
                            ### Unix core principles:

                            * Do one thing well
                            * Process lines of text, not binary
                            * Regular Expressions are powerful, use them
                            * Default to standard I/O
                            * Don&rsquo;t be chatty
                            * Output the same format as was passed to input
                            * Don&rsquo;t to the heavy lifting
                            * When you don&rsquo;t have just the right tool, build it!

                        </script> 
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                        ### What does this give us? 
                        * Small, focused programs.
                        * Complex tasks are tackled by chaining these programs together, directing the output of one application into the input of another.
                        * Unix is terse. When a command executes sucessfully, you&rsquo;ll most likely get no textual response.

                        </script>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <script type="text/template">
                            ## Common unix directory structures
```bash
                     /[root]
                        |
                -----------------------------------------
                |       |       |       |       |       |
                /bin   /usr   /sbin    /var    /tmp    /etc
                        |               |
                -----------------       ---------
                |       |       |       |       |
                /home  /bin   /sbin   /log     /www
```   
                            </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
                            * `/bin` - contains applications and utilities essential to system operation
                            * `/usr/bin` - directory for binaries that while important, are not nessesary for systems funcitonality.
                            * `/sbin`, `/usr/sbin` - contain utilities intented for use by the sysadmin. Usually not needed by regular users/
                            * `/etc` - system config files, password DBs startup scripts, etc...
                            * `/tmp` - scratch space for applications and by definition, temporary. Writeable by all users, wiped during a reboot.
                            * `/var` - holds dirs that may be variable in size. System log files, databases, even websites are housed here. 
                        </script>
                    </section>

                <section data-markdown>
                    <script type="text/template">
                    ### Home directory

                    Varies with distribition. Usually `pwd` upon initial login.

                    *  `/usr/home/[username]`
                    *  `/home/[username]`
                    *  `/Users/[username]` *Mac OSX*
                     </script>
                </section>

                </section>


  

                <section>
                <section data-markdown>
                    <script type="text/template">
                    ## Command stucture

                    The way we can call a command vary greatly between different applications. 
                    Example of typical command structure:

                    
                    `$ command [source_file] [dest_file] -flags/arguments`

                    -or-

                    `$ command -flags/arguments [source_file] [dest_file]`

                    </script>
                </section>

                  <section data-markdown>
                        <script type="text/template">
### Arguments
#### All arguments are **case sensitive!**
###### There are often short name and long name flags/arguments thet may be passed. 

* Longname arguments begin with a double hyphen `--`:
`$ git --help`

* Shortname arguments begin with a single hyphen `-`
`ls -l -a -h`

* Shortname arguments are stackable:
`ls -lah`



                        </script>
                    </section>


                    </section>
                
                <section>
                    <section data-markdown>
                        <script type="text/template">
                        ## Getting your bearings

* `whoami`  - will print out your username 

* `w` - summary of current activity on the system including what each user is doing

* `uname -a` - Info about operating system, kernal version and hostname of the system you&rsquo;re using.

* `uname` - shortname of the version of unix you&rsquo;re using.

* `pwd` - prints your current working directory
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
### Moving around
* `cd [dir]` - move to dir 
* `cd ..` - move up one dir 
* `cd ../../..` - move up three dir
* `cd` || `cd ~` - move to current users home dir.
* `cd -` - move to last known pwd.

                        </script>
                    </section>

                    
                    <section data-markdown>
                        <script type="text/template">
### Listing directory contents
* `ls` - list pwd contents
* `ls [dir]` - list dir contents  
                        </script>
                    </section>

                     <section data-markdown>
                        <script type="text/template">
`ls -l` yields results in a table, giving us a deeper look into the files listed.

```bash
drwx------+  28 jeremyclewell  staff         952 Mar 19 17:29 Desktop
-rw-r--r--    1 jeremyclewell  staff           0 Mar 11 15:56 journal.txt
drwxr-xr-x    2 root           staff          68 Feb 21 10:20 tmp
-----------     -------------  -----         --- ------------ -----------
     |                |          |            |        |           |
Permissions         User       Group        Size    Date-time     Name 
```
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
### Deleting directories/files
* `rm` - delete files **permanent**
* `rm -r` - delete directories and contents **permanent**
    * (-r == recursive) 
* `rm -f` - force delete file|directory with no confirmation **permanent**
* if you&rsquo;re ever instructed to type `rm -rf /`...please ignore ;)
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
### Managing Directories
* `mkdir` - make a directory
* `mkdir -p` - makes a directory structure
* `rmdir` - delete a directory (if empty) **permanent**    

So...

`$ mkdir -p foo/bar/[baz|biff]`

will create :

```bash
                                        /foo 
                                          |
                                        /bar
                                          |
                                      --------
                                      |      |
                                    /baz   /biff
```



                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
### Moving / Copying
###### All files/directory names are **case sensitive!**
###### It is best practice to use __lowercase filenames__

* `cp` - copy file(s)
* `mv` - move file(s) - also used for remaming




                        </script>
                    </section>

                </section>
                    

                <section>
                    <section data-markdown>
                        <script type="text/template">
## Permissions
* `[d|-]` - [d]directory or [-]file
* `[rwxrwxrwx]` - Three groups of three [Owner|Group|Others] describing the permissions of the file. 

```bash
                                    rwxr-xr-x
                                    |-||-||-|
                                     |  |  |
                                  ----  |  ----
                                 |      |      |
                               Owner  Group  Others
```
User has read,write and execution permissions, group and everyone has read and execute permisions. 
                        </script>
                    </section>

                 <section data-markdown>
                        <script type="text/template">
### Where can I find a file&rsquo;s permissions?

`ls -l` List files - long form will disclose permissions set on each file.

```bash
drwx------+  28 jeremyclewell  staff         952 Mar 19 17:29 Desktop
-rw-r--r--    1 jeremyclewell  staff           0 Mar 11 15:56 journal.txt
drwxr-xr-x    2 root           staff          68 Feb 21 10:20 tmp
-----------     -------------  -----         --- ------------ -----------
     |                |          |            |        |           |
Permissions         User       Group        Size    Date-time     Name 
```
</script>
                    </section>                    

                    <section data-markdown>
                        <script type="text/template">
## chmod 

####changes file/dir permissions

* `chmod g+w foo.txt` - gives the group write permission
* `chmod o-wx foo.txt` - removes write and execute permissions for others
* `chmod -R u=rwx,go=rx bar/` - recursivly sets perms for all files in a dir
* `chmod 755 baz.py` - octal mode...[look it up](http://en.wikipedia.org/wiki/Chmod#Octal_modes).
    * 7   full    
    * 6 read and write
    * 5 read and execute
    * 4 read only
    * 3 write and execute
    * 2 write only
    * 1 execute only
    * 0 none

                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
## chgrp
* `chgrp` - change files/dirs group

```bash
$ touch foo.txt
$ ls -l
> -rw-r--r--    1 jeremyclewell  staff        0 Mar 11 15:56 foo.txt
$ chgrp everyone foo.txt
$ ls -l
> -rw-r--r--    1 jeremyclewell  everyone     0 Mar 11 15:56 foo.txt
```
                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
## chown
`chown` - change files/dirs owner
**can only be set by root user**
                        </script>
                    </section>

<section data-markdown>
    <script type="text/template">
### Superuser/root

* has complete control over the system. 
    * Topmost permissions over filestructure
    * can create/delete users
* **Too** powerful!
    * considered bad form to login to a system as superuser/root

__Many modern OS&rsquo;s actually disable superuser entirely__

`sudo` - Allows you to run a command with root user privledges

    </script>
</section>


                </section>

                <section>
                    <section data-markdown>
                        <script type="text/template">
    ## Reading / Writing

### Reading from files

* `cat` - 'concatanate'. Pipes files content to stdout...all at once
* `more` and `less` - Terminal pagers. Read through files, one page at a time. 
    * As the entire file doesn&rsquo;t not need to be loaded at once they are the better option for large files. 
    * Older versions of `more` could only scroll down. `less` has additional feature sets; regexp searching, vim style navigation, etc... 
* `head` | `tail` - display first and last lines of a file respectively

                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
### Writing to files
* `cat` - yes...'cat' when called with no args your terminal session becomes stdin...so:



```bash
cat > grocerylist.txt 
        milk
        granola
        15lbs of hamburger
        ^D
```


...will create a file with the listed contents. Note the `^D` to send an end-of-file message. 
</script>
                    </section>

<section data-markdown>
                        <script type="text/template">
### Writing to files...continued
* `pico` - Pico is a very basic editor. 
* `nano` - Nano is a GNU port of Pico, but features a free software liscence and a number of optional improvements; syntax hightlighting, regexp searches, auto indentation and mouse support to name a few.
</script>
                    </section>



                    <section data-markdown>
                        <script type="text/template">
### Writing to files...continued
#### - the war - 
* `vi` | `vim` - Vi is a text editor written for Unix in 1976. Vim - is Vi (IM)proved. Emphasis on compositional interaction.
* `emacs` - written in the 70s, the GNU Emacs manual describes it as "the extensible, customizable, self-documenting, real-time display editor"

                        </script>
                    </section>

                </section>

<section>
<section data-markdown>
    <script type="text/template">
## Finding stuff

### Filenames
* `locate` - Scours a pathname database for the passed string. 
    
```bash
$ locate "myfile.txt"
```

* `find` - recursively descends the directory tree looking for the passed string.

```bash
$ find . -name myfile.txt
```

* `mfind` - from the man page, "consults the central metadata store"...this is the same process used by Spotlight. (Mac OSX only)

```bash
$ mdfind -name myfile.txt
```
</script>
</section>

 <section data-markdown>
        <script type="text/template">
### Searching for patterns within files

* `grep` - searches files, or filenames for the passed string using regular espressions.
    * The name comes from the `g/re/p` command used in the "ed" editor in days of Unix past

```bash
$ grep -r "myfile.txt" .
```
    </script>
</section>

</section>

<section>
    <section data-markdown>
        <script type="text/template">
        ### Dialing out

* `host` - performs a DNS lookup
* `ping` - elicits a response from a host
* `traceroute` - effectively, a ping response from each gateway passed through on the path to some host.
* `ssh` - logs into a remote host

        </script>
    </section>

    <section data-markdown>
        <script type="text/template">
        ### Moving stuff between systems

        * `ftp` - transfer files over the FTP protocol
        * `sftp` - like `ftp`, but uses ssh
        * `scp` - secure copying of files over network with ssh
        * `rsync` - transfers the difference of two file sets over the network, 'syncing' them
        * `wget` - download files from the internet
        * `curl` - transfers files to and from remote servers...supports a wide range of protocols

        </script>
    </section>

</section>

<section>
    
    <section data-markdown>
        <script type="text/template">
        ## When you get lost
        ### Getting help - not very consistant...

Many commands accept a help argument or flag, but the syntax varies:

* `[command] --help`
* `[command] -h`
* `[command] help`

        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
 ### Getting help...continued

Most commands have a Man[ual]...often termed the "Man pages"

`man [command]`

The `apropos` command searches short descriptions of system commands...if you&rsquo;re *really* lost start here.

`apropos [keyword]`

        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
        ### Tracing out commands

        To see what&rsquo;s going on behind the scenes, turn execution tracing on.

* `set -x` - turn execution tracing on
* `set +x` - turn execution tracing ff

        </script>
    </section>
</section>
<section>
    <section data-markdown>
        <script type="text/template">
## Messing with history

* `history` - display command history

* `!N` - execute the command found in you history at [N]
* `!-N` - execute the command [N] steps back in history

        </script>
    </section>
    <section data-markdown>
        <script type="text/template">
        ### Messing with history...cont.
* `![string]` - search back in history and execute the first command that begins with [string]

* `^r` - an interactive, reverse search of your command history...it&rsquo;s awesome...
        </script>
    </section>

  <section data-markdown>
                        <script type="text/template">
### Messing with history...cont.
`!!` - Repeat last command
Useful in the case where you need to repeat a long command, prefaced or followed by another command, i.e.,


```bash
$ make me a sandwich
bash: make me a sandwich: Permission denied
$ sudo !!
bash: well okay then.
```  
    </script>
</section>



<section data-markdown>
                        <script type="text/template">
                        ### Messing with history...cont.
                        `^search^replace^` - execute last command, but replacing the first search search string found with the replacement string. 

```bash 
$ build -c macys.jd
> No files found for "macys.jd".
$ ^jd^js^
```

                        </script>
                    </section>


<section data-markdown>
                        <script type="text/template">
### Messing with history...cont.
...but what if you want to replace more than one instance of 
that search string? 

Well, it gets a bit more complex:


```
$ build -c garnethill.jd grandinroad.jd frontgate.jd
> No files found for "garnethill.jd".
$ !:gs/jd/js/
```

                        </script>
                    </section>


<section data-markdown>
                        <script type="text/template">
### So, what&rsquo;s up with the bang-colon?

...well, it&rsquo;s a word designator. 


* `!:0` - will return the last command you executed...but only the program, none of the arguments

* `!:1, !:2, !:3...` - will return the first argument, and each subsequent argument at the specified index.

* `!:2-5` - will return the arguments in the ranged listed.

                        </script>
                    </section>

                <section data-markdown>
                        <script type="text/template">
                        ### How might these be used?

                        if `history` looks like:

                        ``` bash
43  git add frontend/src/script/custom/
44  git commit -m 'brownells - add tabbed endcap op'
45  git co master
46  git pull monetate master
47  git co cornerstone-fix_top_category_page_typing
48  check frontgate.js improvementscatalog.js grandinroad.js ballarddesigns.js
49  history
  ```

  then both:

* `!48:s/check-deps/build -c/`

  or 

* `build -c !-2:1-4`

will return:

```bash
$ build -c frontgate.js improvementscatalog.js grandinroad.js ballarddesigns.js
```

                        </script>
                    </section>
</section>


<section>
                      <section data-markdown>
                        <script type="text/template">
### Directing the flow of data
#### `<`, `|`, `>` and `>>`

* Pipes `|` are used to take one programs output (stdout) and funnel it to the next program&rsquo;s input (stdin).

* File input `<` is used to read a file into a program&rsquo;s input (stdin).

* Write to file `>` is used to write a program&rsquo;s output (stdout) into a file (destructivly).

* Append to file `>>` is used to append a program&rsquo;s output (stdout) to the end of a file

                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
`echo` - write arguments to the standard output
`sed` - 'Stream editor', modifies standard input
`xargs` - constructs an argument list.
                        </script>
                    </section>
</section>

<section>

                <section data-markdown>
                    <script type="text/template">

## Dot Files
### Your personal configuration

* `.bashrc` - loaded for interactive and login/scripts...keep it fast
* `.bash_profile` - loaded for interactive
* `.ssh/config` - ssh config
* `.vimrc` - vim config

Why the leading period?    
The os will hide any file beginning with a period from the GUI interface.

                    </script>
                </section>

        <section data-markdown>
                        <script type="text/template">
### Sample .bash_profile


```bash
# Pull in bashrc
source $HOME/bin/dotfiles/bashrc

# Basic path munging
export PATH=/opt/local/bin:/opt/local/sbin:$HOME/bin:/usr/local/git/bin:$PATH
export PATH=$PATH:~/git/monetate-frontend/frontend/bin

# Set up Devbox var
export DEVBOX=dev-jclewell-1.monetate.org

# Python path
export PYTHONPATH=/Library/Python/2.7/site-packages/:$PYTHONPATH

# Monetate AWS creds
export AWS_CREDENTIAL_FILE=$HOME/.aws/credentials/dev-jclewell/cred-jclewell.txt

# Setup tab completion  for diff active
complete -F __monetate_script_completion diff_active.py

# Git completion
source /usr/local/git/contrib/completion/git-completion.bash

# Monetate deployment tools
source $HOME/git/monetate-frontend/frontend/tools/bash/deployment.bash

# Monetate convenience aliases
alias gpmm="git pull monetate master"
alias mf="cd ~/git/monetate-frontend"
alias ms="cd ~/git/monetate-server"

# Gimme a fancy prompt
PS1="$PS1"'$([ -n "$TMUX" ] && tmux setenv TMUXPWD_$(tmux display -p "#D" | tr -d %) "$PWD")'
alias tmux="TERM=screen-256color-bce tmux"

# Google CLI junk
alias today="google calendar today"
alias gedit="google docs edit" # ...not your grandpas gedit ;)

# Set up my todo.txt list
alias t="todo.sh -d ~/.todo.cfg"
complete -F _todo t
source /usr/local/etc/bash_completion.d/todo_completion.bash

# Simple convenience function for swapping devboxes
function devset() {
    export DEVBOX="dev-jclewell-$@.monetate.org"
    echo "Devbox now set to:"
    echo $DEVBOX
}

# Alias Hub
alias git=hub

# Vim style input mode
set -o vi

# Pull in 'Z'
. $HOME/bin/z/z.sh

# Use vim by default
export EDITOR=/usr/bin/vim
```

                        </script>
                    </section>

                    <section data-markdown>
                        <script type="text/template">
### Takeaways

* `alias` - defines a callable reference to something else
    * `alias [NAME]=[VALUE]` - no spaces around `=`
* `export` - exports a variable [NAME]=[VALUE]
    * `export [NAME]=[VALUE]` - no spaces around `=`
    * To later reference use the `$` prefix
* `source` | `.` - loads and executes a file
    * `source [FILENAME]`



                        </script>
                    </section>


        </section>











                    <section data-markdown>
                        <script type="text/template">
#DONE
                        </script>
                    </section>

              










            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                // Parallax scrolling
                // parallaxBackgroundImage: 'images/bg.png',
                // parallaxBackgroundSize: '6400px 2400px',

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
